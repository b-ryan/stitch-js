!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Stitch=e()}}(function(){return function e(t,n,i){function o(r,u){if(!n[r]){if(!t[r]){var l="function"==typeof require&&require;if(!u&&l)return l(r,!0);if(s)return s(r,!0);var a=new Error("Cannot find module '"+r+"'");throw a.code="MODULE_NOT_FOUND",a}var c=n[r]={exports:{}};t[r][0].call(c.exports,function(e){var n=t[r][1][e];return o(n||e)},c,c.exports,e,t,n,i)}return n[r].exports}for(var s="function"==typeof require&&require,r=0;r<i.length;r++)o(i[r]);return o}({1:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(e){return e&&e.__esModule?e:{default:e}}(e("./EVENT_TYPES.js")),r=function(){},u=new Set(Object.values(s.default)),l=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.childWindow=null,this.initialized=!1,this._context=n,this.subscribers=[],window.addEventListener("message",function(e){e.source===t.childWindow&&t.onMessage(e.data)})}return o(e,[{key:"subscribe",value:function(e){var t=this,n=function(){t.subscribers=t.subscribers.filter(function(t){return e!==e})};return this.subscribers.push(e),n}},{key:"_emit",value:function(e){var t=!0,n=!1,i=void 0;try{for(var o,s=this.subscribers[Symbol.iterator]();!(t=(o=s.next()).done);t=!0)(0,o.value)(e)}catch(e){n=!0,i=e}finally{try{!t&&s.return&&s.return()}finally{if(n)throw i}}}},{key:"onMessage",value:function(e){e.type===s.default.BOOTSTRAP?(r("event: initialized"),this.initialized=!0,this._sendContext()):"closed"===e.type?(r("event: closed"),this.childWindow=null,this.initialized=!1,this._emit(e)):u.has(e.type)?(r("event",e),this._emit(e)):r("event: [WARNING] unknown message type",e)}},{key:"_sendContext",value:function(){if(!this.initialized||this.childWindow.closed)return this.initialize();r("send context",this._context),this.childWindow.postMessage({type:"update",data:this._context},"*")}},{key:"setContext",value:function(e){this._content=e,this._sendContext()}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r("initialize"),this._context=e,this.childWindow&&this.childWindow.close(),this.initialized=!1,this.childWindow=window.open("http://pipeline.localhost.dev:5000/v2/js-client")}},{key:"close",value:function(){r("close"),this.childWindow&&this.childWindow.close()}}]),e}();n.default=l},{"./EVENT_TYPES.js":2}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=Object.freeze({BOOTSTRAP:"bootstrap",CLOSED:"closed",CONNECTION_CREATED:"connectionCreated",CONNECTION_UPDATED:"connectionUpdated",INTEGRATION_FORM_CLOSE:"integrationFormClose"})},{}],3:[function(e,t,n){"use strict";var i=e("./Client.js"),o=e("./utils.js");t.exports={Client:i,addIntegration:o.addIntegration}},{"./Client.js":1,"./utils.js":4}],4:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n=new s.default,i=null;n.subscribe(function(o){o.type===r.default.CONNECTION_CREATED&&o.data.type===e?i=o.data:o.type!==r.default.CLOSED&&o.type!==r.default.INTEGRATION_FORM_CLOSE||(n.close(),t(i))}),n.initialize({showChrome:!1,targetState:{name:"app.connections.create",params:{route:e}}})}Object.defineProperty(n,"__esModule",{value:!0}),n.addIntegration=o;var s=i(e("./Client.js")),r=i(e("./EVENT_TYPES.js"))},{"./Client.js":1,"./EVENT_TYPES.js":2}]},{},[3])(3)});