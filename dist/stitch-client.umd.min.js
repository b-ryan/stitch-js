!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(t.Stitch={})}(this,function(t){"use strict";function n(t,n){return n={exports:{}},t(n,n.exports),n.exports}function e(t,n){if(!n.type)throw new Error("You must specify `options.type`");return zn.assign(t,{targetState:{name:"app.connections.create",params:{route:n.type}}})}function r(t,n){return o(n),zn.assign(t,{targetState:{name:"app.connections.details.edit",params:{id:n.id}}})}function o(t){if(!t.id)throw new Error("You must specify `options.id`")}function i(t,n){return o(n),zn.assign(t,{targetState:{name:"app.connections.details.authorize",params:{id:n.id}}})}function c(t,n){if(o(n),!n.discovery_job_name)throw new Error("You must specify `options.discovery_job_name`");return zn.assign(t,{targetState:{name:"app.connections.details.check",params:{id:n.id,check_job_name:n.discovery_job_name}}})}function u(t,n){return o(n),zn.assign(t,{targetState:{name:"app.connections.details.fields",params:{id:n.id}}})}function a(t,n){var o=n.id,a=n.type,f=function(t,n,o){var a,s=(a={},E(a,ar.CREATE,e),E(a,ar.EDIT,r),E(a,ar.AUTHORIZE,i),E(a,ar.ONLY_AUTHORIZE,i),E(a,ar.DISCOVER,c),E(a,ar.SELECT_STREAMS,u),a)[n];return s?s(t,o):t}({version:2,hideNav:!0,preventIntegrationFormClose:!0,additionalState:{default_selections:n.default_streams,ephemeral_token:n.ephemeral_token}},t,n);return new ur(function(n,e){var r=new Zn,i=void 0;r.subscribe(function(c){c.type===s.ERROR_LOADING_CONNECTION&&c.data.id===o?(e(new sr(o)),r.close()):c.type===s.ERROR_LOADING_INTEGRATION_TYPE&&a&&c.data.type===a?(e(new fr(a)),r.close()):c.type===s.ERROR_UPGRADING_EPHEMERAL_TOKEN?(e(new pr),r.close()):c.type===s.CLOSED||c.type===s.INTEGRATION_FORM_CLOSE?(i?n(i):e(new lr),r.close()):c.type===s.INTEGRATION_FLOW_COMPLETED&&(a&&c.data.type===a||o&&c.data.id===o)?i=c.data:c.type==s.AUTHORIZE_SUCCESS&&t==ar.ONLY_AUTHORIZE?r.close():c.type==s.AUTHORIZE_FAILURE&&t==ar.ONLY_AUTHORIZE&&(e(new hr),r.close())}),r.initialize(f)})}var s=Object.freeze({BOOTSTRAP:"bootstrap",CLOSED:"closed",CONNECTION_CREATED:"connectionCreated",CONNECTION_UPDATED:"connectionUpdated",ERROR_LOADING_CONNECTION:"errorLoadingConnection",ERROR_LOADING_INTEGRATION_TYPE:"errorLoadingIntegrationType",ERROR_UPGRADING_EPHEMERAL_TOKEN:"errorUpgradingEphemeralToken",INTEGRATION_FLOW_COMPLETED:"integrationFlowCompleted",INTEGRATION_FORM_CLOSE:"integrationFormClose",AUTHORIZE_SUCCESS:"authorizeSuccess",AUTHORIZE_FAILURE:"authorizeFailure"}),f=n(function(t){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)}),l={}.hasOwnProperty,p=function(t,n){return l.call(t,n)},h=function(t){try{return!!t()}catch(t){return!0}},d=!h(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),v=n(function(t){var n=t.exports={version:"2.5.3"};"number"==typeof __e&&(__e=n)}),y=(v.version,function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}),_=function(t,n,e){if(y(t),void 0===n)return t;switch(e){case 1:return function(e){return t.call(n,e)};case 2:return function(e,r){return t.call(n,e,r)};case 3:return function(e,r,o){return t.call(n,e,r,o)}}return function(){return t.apply(n,arguments)}},O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b=function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")},m=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),E=function(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t},g=function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)},S=function(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?t:n},w=function(t){return"object"===(void 0===t?"undefined":O(t))?null!==t:"function"==typeof t},T=function(t){if(!w(t))throw TypeError(t+" is not an object!");return t},j=f.document,P=w(j)&&w(j.createElement),R=function(t){return P?j.createElement(t):{}},A=!d&&!h(function(){return 7!=Object.defineProperty(R("div"),"a",{get:function(){return 7}}).a}),C=function(t,n){if(!w(t))return t;var e,r;if(n&&"function"==typeof(e=t.toString)&&!w(r=e.call(t)))return r;if("function"==typeof(e=t.valueOf)&&!w(r=e.call(t)))return r;if(!n&&"function"==typeof(e=t.toString)&&!w(r=e.call(t)))return r;throw TypeError("Can't convert object to primitive value")},I=Object.defineProperty,N={f:d?Object.defineProperty:function(t,n,e){if(T(t),n=C(n,!0),T(e),A)try{return I(t,n,e)}catch(t){}if("get"in e||"set"in e)throw TypeError("Accessors not supported!");return"value"in e&&(t[n]=e.value),t}},L=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}},F=d?function(t,n,e){return N.f(t,n,L(1,e))}:function(t,n,e){return t[n]=e,t},k="prototype",x=function t(n,e,r){var o,i,c,u=n&t.F,a=n&t.G,s=n&t.S,l=n&t.P,p=n&t.B,h=n&t.W,d=a?v:v[e]||(v[e]={}),y=d[k],O=a?f:s?f[e]:(f[e]||{})[k];a&&(r=e);for(o in r)(i=!u&&O&&void 0!==O[o])&&o in d||(c=i?O[o]:r[o],d[o]=a&&"function"!=typeof O[o]?r[o]:p&&i?_(c,f):h&&O[o]==c?function(t){var n=function(n,e,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(n);case 2:return new t(n,e)}return new t(n,e,r)}return t.apply(this,arguments)};return n[k]=t[k],n}(c):l&&"function"==typeof c?_(Function.call,c):c,l&&((d.virtual||(d.virtual={}))[o]=c,n&t.R&&y&&!y[o]&&F(y,o,c)))};x.F=1,x.G=2,x.S=4,x.P=8,x.B=16,x.W=32,x.U=64,x.R=128;var M=x,D=F,U=0,G=Math.random(),W=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++U+G).toString(36))},z=n(function(t){var n=W("meta"),e=N.f,r=0,o=Object.isExtensible||function(){return!0},i=!h(function(){return o(Object.preventExtensions({}))}),c=function(t){e(t,n,{value:{i:"O"+ ++r,w:{}}})},u=t.exports={KEY:n,NEED:!1,fastKey:function(t,e){if(!w(t))return"symbol"==(void 0===t?"undefined":O(t))?t:("string"==typeof t?"S":"P")+t;if(!p(t,n)){if(!o(t))return"F";if(!e)return"E";c(t)}return t[n].i},getWeak:function(t,e){if(!p(t,n)){if(!o(t))return!0;if(!e)return!1;c(t)}return t[n].w},onFreeze:function(t){return i&&u.NEED&&o(t)&&!p(t,n)&&c(t),t}}}),H=(z.KEY,z.NEED,z.fastKey,z.getWeak,z.onFreeze,"__core-js_shared__"),Y=f[H]||(f[H]={}),Z=function(t){return Y[t]||(Y[t]={})},V=n(function(t){var n=Z("wks"),e=f.Symbol,r="function"==typeof e;(t.exports=function(t){return n[t]||(n[t]=r&&e[t]||(r?e:W)("Symbol."+t))}).store=n}),K=N.f,B=V("toStringTag"),J=function(t,n,e){t&&!p(t=e?t:t.prototype,B)&&K(t,B,{configurable:!0,value:n})},q={f:V},Q=N.f,X=function(t){var n=v.Symbol||(v.Symbol={});"_"==t.charAt(0)||t in n||Q(n,t,{value:q.f(t)})},$={}.toString,tt=function(t){return $.call(t).slice(8,-1)},nt=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==tt(t)?t.split(""):Object(t)},et=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t},rt=function(t){return nt(et(t))},ot=Math.ceil,it=Math.floor,ct=function(t){return isNaN(t=+t)?0:(t>0?it:ot)(t)},ut=Math.min,at=function(t){return t>0?ut(ct(t),9007199254740991):0},st=Math.max,ft=Math.min,lt=Z("keys"),pt=function(t){return lt[t]||(lt[t]=W(t))},ht=function(t){return function(n,e,r){var o,i=rt(n),c=at(i.length),u=function(t,n){return(t=ct(t))<0?st(t+n,0):ft(t,n)}(r,c);if(t&&e!=e){for(;c>u;)if((o=i[u++])!=o)return!0}else for(;c>u;u++)if((t||u in i)&&i[u]===e)return t||u||0;return!t&&-1}}(!1),dt=pt("IE_PROTO"),vt=function(t,n){var e,r=rt(t),o=0,i=[];for(e in r)e!=dt&&p(r,e)&&i.push(e);for(;n.length>o;)p(r,e=n[o++])&&(~ht(i,e)||i.push(e));return i},yt="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),_t=Object.keys||function(t){return vt(t,yt)},Ot={f:Object.getOwnPropertySymbols},bt={f:{}.propertyIsEnumerable},mt=Array.isArray||function(t){return"Array"==tt(t)},Et=d?Object.defineProperties:function(t,n){T(t);for(var e,r=_t(n),o=r.length,i=0;o>i;)N.f(t,e=r[i++],n[e]);return t},gt=f.document,St=gt&&gt.documentElement,wt=pt("IE_PROTO"),Tt=function(){},jt="prototype",Pt=function(){var t,n=R("iframe"),e=yt.length;for(n.style.display="none",St.appendChild(n),n.src="javascript:",(t=n.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),Pt=t.F;e--;)delete Pt[jt][yt[e]];return Pt()},Rt=Object.create||function(t,n){var e;return null!==t?(Tt[jt]=T(t),e=new Tt,Tt[jt]=null,e[wt]=t):e=Pt(),void 0===n?e:Et(e,n)},At=yt.concat("length","prototype"),Ct={f:Object.getOwnPropertyNames||function(t){return vt(t,At)}},It=Ct.f,Nt={}.toString,Lt="object"==("undefined"==typeof window?"undefined":O(window))&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Ft={f:function(t){return Lt&&"[object Window]"==Nt.call(t)?function(t){try{return It(t)}catch(t){return Lt.slice()}}(t):It(rt(t))}},kt=Object.getOwnPropertyDescriptor,xt={f:d?kt:function(t,n){if(t=rt(t),n=C(n,!0),A)try{return kt(t,n)}catch(t){}if(p(t,n))return L(!bt.f.call(t,n),t[n])}},Mt=z.KEY,Dt=xt.f,Ut=N.f,Gt=Ft.f,Wt=f.Symbol,zt=f.JSON,Ht=zt&&zt.stringify,Yt="prototype",Zt=V("_hidden"),Vt=V("toPrimitive"),Kt={}.propertyIsEnumerable,Bt=Z("symbol-registry"),Jt=Z("symbols"),qt=Z("op-symbols"),Qt=Object[Yt],Xt="function"==typeof Wt,$t=f.QObject,tn=!$t||!$t[Yt]||!$t[Yt].findChild,nn=d&&h(function(){return 7!=Rt(Ut({},"a",{get:function(){return Ut(this,"a",{value:7}).a}})).a})?function(t,n,e){var r=Dt(Qt,n);r&&delete Qt[n],Ut(t,n,e),r&&t!==Qt&&Ut(Qt,n,r)}:Ut,en=function(t){var n=Jt[t]=Rt(Wt[Yt]);return n._k=t,n},rn=Xt&&"symbol"==O(Wt.iterator)?function(t){return"symbol"==(void 0===t?"undefined":O(t))}:function(t){return t instanceof Wt},on=function(t,n,e){return t===Qt&&on(qt,n,e),T(t),n=C(n,!0),T(e),p(Jt,n)?(e.enumerable?(p(t,Zt)&&t[Zt][n]&&(t[Zt][n]=!1),e=Rt(e,{enumerable:L(0,!1)})):(p(t,Zt)||Ut(t,Zt,L(1,{})),t[Zt][n]=!0),nn(t,n,e)):Ut(t,n,e)},cn=function(t,n){T(t);for(var e,r=function(t){var n=_t(t),e=Ot.f;if(e)for(var r,o=e(t),i=bt.f,c=0;o.length>c;)i.call(t,r=o[c++])&&n.push(r);return n}(n=rt(n)),o=0,i=r.length;i>o;)on(t,e=r[o++],n[e]);return t},un=function(t){var n=Kt.call(this,t=C(t,!0));return!(this===Qt&&p(Jt,t)&&!p(qt,t))&&(!(n||!p(this,t)||!p(Jt,t)||p(this,Zt)&&this[Zt][t])||n)},an=function(t,n){if(t=rt(t),n=C(n,!0),t!==Qt||!p(Jt,n)||p(qt,n)){var e=Dt(t,n);return!e||!p(Jt,n)||p(t,Zt)&&t[Zt][n]||(e.enumerable=!0),e}},sn=function(t){for(var n,e=Gt(rt(t)),r=[],o=0;e.length>o;)p(Jt,n=e[o++])||n==Zt||n==Mt||r.push(n);return r},fn=function(t){for(var n,e=t===Qt,r=Gt(e?qt:rt(t)),o=[],i=0;r.length>i;)!p(Jt,n=r[i++])||e&&!p(Qt,n)||o.push(Jt[n]);return o};Xt||(D((Wt=function(){if(this instanceof Wt)throw TypeError("Symbol is not a constructor!");var t=W(arguments.length>0?arguments[0]:void 0);return d&&tn&&nn(Qt,t,{configurable:!0,set:function n(e){this===Qt&&n.call(qt,e),p(this,Zt)&&p(this[Zt],t)&&(this[Zt][t]=!1),nn(this,t,L(1,e))}}),en(t)})[Yt],"toString",function(){return this._k}),xt.f=an,N.f=on,Ct.f=Ft.f=sn,bt.f=un,Ot.f=fn,q.f=function(t){return en(V(t))}),M(M.G+M.W+M.F*!Xt,{Symbol:Wt});for(var ln="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),pn=0;ln.length>pn;)V(ln[pn++]);for(var hn=_t(V.store),dn=0;hn.length>dn;)X(hn[dn++]);M(M.S+M.F*!Xt,"Symbol",{for:function(t){return p(Bt,t+="")?Bt[t]:Bt[t]=Wt(t)},keyFor:function(t){if(!rn(t))throw TypeError(t+" is not a symbol!");for(var n in Bt)if(Bt[n]===t)return n},useSetter:function(){tn=!0},useSimple:function(){tn=!1}}),M(M.S+M.F*!Xt,"Object",{create:function(t,n){return void 0===n?Rt(t):cn(Rt(t),n)},defineProperty:on,defineProperties:cn,getOwnPropertyDescriptor:an,getOwnPropertyNames:sn,getOwnPropertySymbols:fn}),zt&&M(M.S+M.F*(!Xt||h(function(){var t=Wt();return"[null]"!=Ht([t])||"{}"!=Ht({a:t})||"{}"!=Ht(Object(t))})),"JSON",{stringify:function(t){for(var n,e,r=[t],o=1;arguments.length>o;)r.push(arguments[o++]);if(e=n=r[1],(w(n)||void 0!==t)&&!rn(t))return mt(n)||(n=function(t,n){if("function"==typeof e&&(n=e.call(this,t,n)),!rn(n))return n}),r[1]=n,Ht.apply(zt,r)}}),Wt[Yt][Vt]||F(Wt[Yt],Vt,Wt[Yt].valueOf),J(Wt,"Symbol"),J(Math,"Math",!0),J(f.JSON,"JSON",!0),M(M.S,"Object",{create:Rt}),M(M.S+M.F*!d,"Object",{defineProperty:N.f}),M(M.S+M.F*!d,"Object",{defineProperties:Et});var vn=function(t,n){var e=(v.Object||{})[t]||Object[t],r={};r[t]=n(e),M(M.S+M.F*h(function(){e(1)}),"Object",r)},yn=xt.f;vn("getOwnPropertyDescriptor",function(){return function(t,n){return yn(rt(t),n)}});var _n=function(t){return Object(et(t))},On=pt("IE_PROTO"),bn=Object.prototype,mn=Object.getPrototypeOf||function(t){return t=_n(t),p(t,On)?t[On]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?bn:null};vn("getPrototypeOf",function(){return function(t){return mn(_n(t))}}),vn("keys",function(){return function(t){return _t(_n(t))}}),vn("getOwnPropertyNames",function(){return Ft.f});var En=z.onFreeze;vn("freeze",function(t){return function(n){return t&&w(n)?t(En(n)):n}});var gn=z.onFreeze;vn("seal",function(t){return function(n){return t&&w(n)?t(gn(n)):n}});var Sn=z.onFreeze;vn("preventExtensions",function(t){return function(n){return t&&w(n)?t(Sn(n)):n}}),vn("isFrozen",function(t){return function(n){return!w(n)||!!t&&t(n)}}),vn("isSealed",function(t){return function(n){return!w(n)||!!t&&t(n)}}),vn("isExtensible",function(t){return function(n){return!!w(n)&&(!t||t(n))}});var wn=Object.assign,Tn=!wn||h(function(){var t={},n={},e=Symbol(),r="abcdefghijklmnopqrst";return t[e]=7,r.split("").forEach(function(t){n[t]=t}),7!=wn({},t)[e]||Object.keys(wn({},n)).join("")!=r})?function(t,n){for(var e=_n(t),r=arguments.length,o=1,i=Ot.f,c=bt.f;r>o;)for(var u,a=nt(arguments[o++]),s=i?_t(a).concat(i(a)):_t(a),f=s.length,l=0;f>l;)c.call(a,u=s[l++])&&(e[u]=a[u]);return e}:wn;M(M.S+M.F,"Object",{assign:Tn});var jn=Object.is||function(t,n){return t===n?0!==t||1/t==1/n:t!=t&&n!=n};M(M.S,"Object",{is:jn});var Pn=function(t,n){if(T(t),!w(n)&&null!==n)throw TypeError(n+": can't set as prototype!")},Rn={set:Object.setPrototypeOf||("__proto__"in{}?function(t,n,e){try{(e=_(Function.call,xt.f(Object.prototype,"__proto__").set,2))(t,[]),n=!(t instanceof Array)}catch(t){n=!0}return function(t,r){return Pn(t,r),n?t.__proto__=r:e(t,r),t}}({},!1):void 0),check:Pn};M(M.S,"Object",{setPrototypeOf:Rn.set});var An=f.Reflect,Cn=An&&An.ownKeys||function(t){var n=Ct.f(T(t)),e=Ot.f;return e?n.concat(e(t)):n},In=function(t,n,e){n in t?N.f(t,n,L(0,e)):t[n]=e};M(M.S,"Object",{getOwnPropertyDescriptors:function(t){for(var n,e,r=rt(t),o=xt.f,i=Cn(r),c={},u=0;i.length>u;)void 0!==(e=o(r,n=i[u++]))&&In(c,n,e);return c}});var Nn=bt.f,Ln=function(t){return function(n){for(var e,r=rt(n),o=_t(r),i=o.length,c=0,u=[];i>c;)Nn.call(r,e=o[c++])&&u.push(t?[e,r[e]]:r[e]);return u}},Fn=Ln(!1);M(M.S,"Object",{values:function(t){return Fn(t)}});var kn=Ln(!0);M(M.S,"Object",{entries:function(t){return kn(t)}});d&&M(M.P+!0,"Object",{__defineGetter__:function(t,n){N.f(_n(this),t,{get:y(n),enumerable:!0,configurable:!0})}}),d&&M(M.P+!0,"Object",{__defineSetter__:function(t,n){N.f(_n(this),t,{set:y(n),enumerable:!0,configurable:!0})}});var xn=xt.f;d&&M(M.P+!0,"Object",{__lookupGetter__:function(t){var n,e=_n(this),r=C(t,!0);do{if(n=xn(e,r))return n.get}while(e=mn(e))}});var Mn=xt.f;d&&M(M.P+!0,"Object",{__lookupSetter__:function(t){var n,e=_n(this),r=C(t,!0);do{if(n=Mn(e,r))return n.set}while(e=mn(e))}}),M(M.S+M.F,"Object",{isObject:w});var Dn=V("toStringTag"),Un="Arguments"==tt(function(){return arguments}()),Gn=function(t){var n,e,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(e=function(t,n){try{return t[n]}catch(t){}}(n=Object(t),Dn))?e:Un?tt(n):"Object"==(r=tt(n))&&"function"==typeof n.callee?"Arguments":r};M(M.S+M.F,"Object",{classof:Gn});var Wn=function(t,n){for(var e,r=Cn(rt(n)),o=r.length,i=0;o>i;)N.f(t,e=r[i++],xt.f(n,e));return t};M(M.S+M.F,"Object",{define:Wn}),M(M.S+M.F,"Object",{make:function(t,n){return Wn(Rt(t),n)}});var zn=v.Object,Hn=function(){},Yn=zn.values(s),Zn=function(){function t(){var n=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};b(this,t),this._childWindow=null,this._initialized=!1,this._context=e,this._subscribers=[],window.addEventListener("message",function(t){t.source===n._childWindow&&n._onMessage(t.data)})}return m(t,[{key:"subscribe",value:function(t){var n=this;return this._subscribers.push(t),function(){n._subscribers=n._subscribers.filter(function(n){return t!=t})}}},{key:"_emit",value:function(t){var n=!0,e=!1,r=void 0;try{for(var o,i=this._subscribers[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){(0,o.value)(t)}}catch(t){e=!0,r=t}finally{try{!n&&i.return&&i.return()}finally{if(e)throw r}}}},{key:"_pollForChildWindowClosed",value:function(){var t=this;window.setTimeout(function(){t._childWindow&&(t._childWindow.closed?t._windowClosed():t._pollForChildWindowClosed())},1e3)}},{key:"_windowClosed",value:function(){Hn("event: closed"),this._childWindow=null,this._initialized=!1,this._emit({type:"closed"})}},{key:"_onMessage",value:function(t){Hn("event",t),t.type===s.BOOTSTRAP?(this._initialized=!0,this._sendContext(),Hn("initialized")):t.type===s.CLOSED||(Yn.indexOf(t.type)>=0?this._emit(t):Hn("[WARNING] unknown message type",t))}},{key:"_sendContext",value:function(){if(!this._initialized||this._childWindow.closed)return this.initialize();Hn("send context",this._context),this._childWindow.postMessage({type:"update",data:this._context},"*")}},{key:"setContext",value:function(t){this._content=t,this._sendContext()}},{key:"initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Hn("initialize"),this._context=t,this._childWindow&&this._childWindow.close(),this._initialized=!1,this._childWindow=window.open("https://app.stitchdata.com/v2/js-client"),this._pollForChildWindowClosed()}},{key:"close",value:function(){Hn("close"),this._childWindow&&this._childWindow.close()}}]),t}(),Vn={},Kn={};F(Kn,V("iterator"),function(){return this});var Bn=V("iterator"),Jn=!([].keys&&"next"in[].keys()),qn="values",Qn=function(){return this},Xn=function(t,n,e,r,o,i,c){!function(t,n,e){t.prototype=Rt(Kn,{next:L(1,e)}),J(t,n+" Iterator")}(e,n,r);var u,a,s,f=function(t){if(!Jn&&t in d)return d[t];switch(t){case"keys":case qn:return function(){return new e(this,t)}}return function(){return new e(this,t)}},l=n+" Iterator",p=o==qn,h=!1,d=t.prototype,v=d[Bn]||d["@@iterator"]||o&&d[o],y=!Jn&&v||f(o),_=o?p?f("entries"):y:void 0,O="Array"==n?d.entries||v:v;if(O&&(s=mn(O.call(new t)))!==Object.prototype&&s.next&&J(s,l,!0),p&&v&&v.name!==qn&&(h=!0,y=function(){return v.call(this)}),c&&(Jn||h||!d[Bn])&&F(d,Bn,y),Vn[n]=y,Vn[l]=Qn,o)if(u={values:p?y:f(qn),keys:i?y:f("keys"),entries:_},c)for(a in u)a in d||D(d,a,u[a]);else M(M.P+M.F*(Jn||h),n,u);return u},$n=function(t){return function(n,e){var r,o,i=String(et(n)),c=ct(e),u=i.length;return c<0||c>=u?t?"":void 0:(r=i.charCodeAt(c))<55296||r>56319||c+1===u||(o=i.charCodeAt(c+1))<56320||o>57343?t?i.charAt(c):r:t?i.slice(c,c+2):o-56320+(r-55296<<10)+65536}}(!0);Xn(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,n=this._t,e=this._i;return e>=n.length?{value:void 0,done:!0}:(t=$n(n,e),this._i+=t.length,{value:t,done:!1})});var te=function(t,n){return{value:n,done:!!t}};Xn(Array,"Array",function(t,n){this._t=rt(t),this._i=0,this._k=n},function(){var t=this._t,n=this._k,e=this._i++;return!t||e>=t.length?(this._t=void 0,te(1)):te(0,"keys"==n?e:"values"==n?t[e]:[e,t[e]])},"values");Vn.Arguments=Vn.Array;for(var ne=V("toStringTag"),ee="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),re=0;re<ee.length;re++){var oe=ee[re],ie=f[oe],ce=ie&&ie.prototype;ce&&!ce[ne]&&F(ce,ne,oe),Vn[oe]=Vn.Array}var ue,ae,se,fe=function(t,n,e,r){try{return r?n(T(e)[0],e[1]):n(e)}catch(n){var o=t.return;throw void 0!==o&&T(o.call(t)),n}},le=V("iterator"),pe=Array.prototype,he=V("iterator"),de=v.getIteratorMethod=function(t){if(void 0!=t)return t[he]||t["@@iterator"]||Vn[Gn(t)]},ve=n(function(t){var n={},e={},r=t.exports=function(t,r,o,i,c){var u,a,s,f,l=c?function(){return t}:de(t),p=_(o,i,r?2:1),h=0;if("function"!=typeof l)throw TypeError(t+" is not iterable!");if(function(t){return void 0!==t&&(Vn.Array===t||pe[le]===t)}(l)){for(u=at(t.length);u>h;h++)if((f=r?p(T(a=t[h])[0],a[1]):p(t[h]))===n||f===e)return f}else for(s=l.call(t);!(a=s.next()).done;)if((f=fe(s,p,a.value,r))===n||f===e)return f};r.BREAK=n,r.RETURN=e}),ye=V("species"),_e=function(t,n){var e,r=T(t).constructor;return void 0===r||void 0==(e=T(r)[ye])?n:y(e)},Oe=f.process,be=f.setImmediate,me=f.clearImmediate,Ee=f.MessageChannel,ge=f.Dispatch,Se=0,we={},Te="onreadystatechange",je=function(){var t=+this;if(we.hasOwnProperty(t)){var n=we[t];delete we[t],n()}},Pe=function(t){je.call(t.data)};be&&me||(be=function(t){for(var n=[],e=1;arguments.length>e;)n.push(arguments[e++]);return we[++Se]=function(){!function(t,n,e){var r=void 0===e;switch(n.length){case 0:return r?t():t.call(e);case 1:return r?t(n[0]):t.call(e,n[0]);case 2:return r?t(n[0],n[1]):t.call(e,n[0],n[1]);case 3:return r?t(n[0],n[1],n[2]):t.call(e,n[0],n[1],n[2]);case 4:return r?t(n[0],n[1],n[2],n[3]):t.call(e,n[0],n[1],n[2],n[3])}t.apply(e,n)}("function"==typeof t?t:Function(t),n)},ue(Se),Se},me=function(t){delete we[t]},"process"==tt(Oe)?ue=function(t){Oe.nextTick(_(je,t,1))}:ge&&ge.now?ue=function(t){ge.now(_(je,t,1))}:Ee?(se=(ae=new Ee).port2,ae.port1.onmessage=Pe,ue=_(se.postMessage,se,1)):f.addEventListener&&"function"==typeof postMessage&&!f.importScripts?(ue=function(t){f.postMessage(t+"","*")},f.addEventListener("message",Pe,!1)):ue=Te in R("script")?function(t){St.appendChild(R("script"))[Te]=function(){St.removeChild(this),je.call(t)}}:function(t){setTimeout(_(je,t,1),0)});var Re={set:be,clear:me},Ae=Re.set,Ce=f.MutationObserver||f.WebKitMutationObserver,Ie=f.process,Ne=f.Promise,Le="process"==tt(Ie),Fe={f:function(t){return new function(t){var n,e;this.promise=new t(function(t,r){if(void 0!==n||void 0!==e)throw TypeError("Bad Promise constructor");n=t,e=r}),this.resolve=y(n),this.reject=y(e)}(t)}},ke=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}},xe=function(t,n){if(T(t),w(n)&&n.constructor===t)return n;var e=Fe.f(t);return(0,e.resolve)(n),e.promise},Me=V("species"),De=V("iterator"),Ue=!1;try{[7][De]().return=function(){Ue=!0}}catch(t){}var Ge,We,ze,He,Ye=Re.set,Ze=function(){var t,n,e,r=function(){var r,o;for(Le&&(r=Ie.domain)&&r.exit();t;){o=t.fn,t=t.next;try{o()}catch(r){throw t?e():n=void 0,r}}n=void 0,r&&r.enter()};if(Le)e=function(){Ie.nextTick(r)};else if(!Ce||f.navigator&&f.navigator.standalone)if(Ne&&Ne.resolve){var o=Ne.resolve();e=function(){o.then(r)}}else e=function(){Ae.call(f,r)};else{var i=!0,c=document.createTextNode("");new Ce(r).observe(c,{characterData:!0}),e=function(){c.data=i=!i}}return function(r){var o={fn:r,next:void 0};n&&(n.next=o),t||(t=o,e()),n=o}}(),Ve="Promise",Ke=f.TypeError,Be=f.process,Je=f[Ve],qe="process"==Gn(Be),Qe=function(){},Xe=We=Fe.f,$e=!!function(){try{var t=Je.resolve(1),n=(t.constructor={})[V("species")]=function(t){t(Qe,Qe)};return(qe||"function"==typeof PromiseRejectionEvent)&&t.then(Qe)instanceof n}catch(t){}}(),tr=function(t){var n;return!(!w(t)||"function"!=typeof(n=t.then))&&n},nr=function(t,n){if(!t._n){t._n=!0;var e=t._c;Ze(function(){for(var r=t._v,o=1==t._s,i=0,c=function(n){var e,i,c=o?n.ok:n.fail,u=n.resolve,a=n.reject,s=n.domain;try{c?(o||(2==t._h&&or(t),t._h=1),!0===c?e=r:(s&&s.enter(),e=c(r),s&&s.exit()),e===n.promise?a(Ke("Promise-chain cycle")):(i=tr(e))?i.call(e,u,a):u(e)):a(r)}catch(t){a(t)}};e.length>i;)c(e[i++]);t._c=[],t._n=!1,n&&!t._h&&er(t)})}},er=function(t){Ye.call(f,function(){var n,e,r,o=t._v,i=rr(t);if(i&&(n=ke(function(){qe?Be.emit("unhandledRejection",o,t):(e=f.onunhandledrejection)?e({promise:t,reason:o}):(r=f.console)&&r.error&&r.error("Unhandled promise rejection",o)}),t._h=qe||rr(t)?2:1),t._a=void 0,i&&n.e)throw n.v})},rr=function(t){return 1!==t._h&&0===(t._a||t._c).length},or=function(t){Ye.call(f,function(){var n;qe?Be.emit("rejectionHandled",t):(n=f.onrejectionhandled)&&n({promise:t,reason:t._v})})},ir=function(t){var n=this;n._d||(n._d=!0,(n=n._w||n)._v=t,n._s=2,n._a||(n._a=n._c.slice()),nr(n,!0))},cr=function t(n){var e,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===n)throw Ke("Promise can't be resolved itself");(e=tr(n))?Ze(function(){var o={_w:r,_d:!1};try{e.call(n,_(t,o,1),_(ir,o,1))}catch(t){ir.call(o,t)}}):(r._v=n,r._s=1,nr(r,!1))}catch(t){ir.call({_w:r,_d:!1},t)}}};$e||(Je=function(t){!function(t,n,e,r){if(!(t instanceof n)||void 0!==r&&r in t)throw TypeError(e+": incorrect invocation!")}(this,Je,Ve,"_h"),y(t),Ge.call(this);try{t(_(cr,this,1),_(ir,this,1))}catch(t){ir.call(this,t)}},(Ge=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=function(t,n,e){for(var r in n)e&&t[r]?t[r]=n[r]:F(t,r,n[r]);return t}(Je.prototype,{then:function(t,n){var e=Xe(_e(this,Je));return e.ok="function"!=typeof t||t,e.fail="function"==typeof n&&n,e.domain=qe?Be.domain:void 0,this._c.push(e),this._a&&this._a.push(e),this._s&&nr(this,!1),e.promise},catch:function(t){return this.then(void 0,t)}}),ze=function(){var t=new Ge;this.promise=t,this.resolve=_(cr,t,1),this.reject=_(ir,t,1)},Fe.f=Xe=function(t){return t===Je||t===He?new ze(t):We(t)}),M(M.G+M.W+M.F*!$e,{Promise:Je}),J(Je,Ve),function(t){var n="function"==typeof v[t]?v[t]:f[t];d&&n&&!n[Me]&&N.f(n,Me,{configurable:!0,get:function(){return this}})}(Ve),He=v[Ve],M(M.S+M.F*!$e,Ve,{reject:function(t){var n=Xe(this);return(0,n.reject)(t),n.promise}}),M(M.S+!0*M.F,Ve,{resolve:function(t){return xe(this===He?Je:this,t)}}),M(M.S+M.F*!($e&&function(t,n){if(!n&&!Ue)return!1;var e=!1;try{var r=[7],o=r[De]();o.next=function(){return{done:e=!0}},r[De]=function(){return o},t(r)}catch(t){}return e}(function(t){Je.all(t).catch(Qe)})),Ve,{all:function(t){var n=this,e=Xe(n),r=e.resolve,o=e.reject,i=ke(function(){var e=[],i=0,c=1;ve(t,!1,function(t){var u=i++,a=!1;e.push(void 0),c++,n.resolve(t).then(function(t){a||(a=!0,e[u]=t,--c||r(e))},o)}),--c||r(e)});return i.e&&o(i.v),e.promise},race:function(t){var n=this,e=Xe(n),r=e.reject,o=ke(function(){ve(t,!1,function(t){n.resolve(t).then(e.resolve,r)})});return o.e&&r(o.v),e.promise}}),M(M.P+M.R,"Promise",{finally:function(t){var n=_e(this,v.Promise||f.Promise),e="function"==typeof t;return this.then(e?function(e){return xe(n,t()).then(function(){return e})}:t,e?function(e){return xe(n,t()).then(function(){throw e})}:t)}}),M(M.S,"Promise",{try:function(t){var n=Fe.f(this),e=ke(t);return(e.e?n.reject:n.resolve)(e.v),n.promise}});var ur=v.Promise,ar={CREATE:"CREATE",EDIT:"EDIT",AUTHORIZE:"AUTHORIZE",ONLY_AUTHORIZE:"ONLY_AUTHORIZE",DISCOVER:"DISCOVER",SELECT_STREAMS:"SELECT_STREAMS"},sr=function(t){function n(t){b(this,n);var e=S(this,(n.__proto__||zn.getPrototypeOf(n)).call(this,"Integration with id "+t+" not found."));return e.constructor=n,e}return g(n,t),n}(Error),fr=function(t){function n(t){b(this,n);var e=S(this,(n.__proto__||zn.getPrototypeOf(n)).call(this,'Unknown source type: "'+t+'".'));return e.constructor=n,e}return g(n,t),n}(Error),lr=function(t){function n(){b(this,n);var t=S(this,(n.__proto__||zn.getPrototypeOf(n)).call(this,"App closed before reaching end of flow."));return t.constructor=n,t}return g(n,t),n}(Error),pr=function(t){function n(){b(this,n);var t=S(this,(n.__proto__||zn.getPrototypeOf(n)).call(this,"Error upgrading ephemeral token."));return t.constructor=n,t}return g(n,t),n}(Error),hr=function(t){function n(){b(this,n);var t=S(this,(n.__proto__||zn.getPrototypeOf(n)).call(this,"Error authorizing connection."));return t.constructor=n,t}return g(n,t),n}(Error);t.STEPS=ar,t.SourceNotFoundError=sr,t.UnknownSourceTypeError=fr,t.AppClosedPrematurelyError=lr,t.UpgradeEphemeralTokenError=pr,t.AuthorizeFailureError=hr,t.addSource=function(t){return a(ar.CREATE,t)},t.editSource=function(t){return a(ar.EDIT,t)},t.authorizeSource=function(t){return a(ar.AUTHORIZE,t)},t.onlyAuthorizeSource=function(t){return a(ar.ONLY_AUTHORIZE,t)},t.displayDiscoveryOutputForSource=function(t){return a(ar.DISCOVER,t)},t.selectStreamsForSource=function(t){return a(ar.SELECT_STREAMS,t)},Object.defineProperty(t,"__esModule",{value:!0})});
