!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(t.Stitch={})}(this,function(t){"use strict";function n(t,n){return n={exports:{}},t(n,n.exports),n.exports}function e(t,n){if(!n.type)throw new Error("You must specify `options.type`");return zn.assign(t,{targetState:{name:"app.connections.create",params:{route:n.type}}})}function r(t){if(!t.id)throw new Error("You must specify `options.id`")}function o(t,n){return r(n),zn.assign(t,{targetState:{name:"app.connections.details.authorize",params:{id:n.id}}})}function i(t,n){if(r(n),!n.discovery_job_name)throw new Error("You must specify `options.discovery_job_name`");return zn.assign(t,{targetState:{name:"app.connections.details.check",params:{id:n.id,check_job_name:n.discovery_job_name}}})}function c(t,n){return r(n),zn.assign(t,{targetState:{name:"app.connections.details.fields",params:{id:n.id}}})}function u(t,n){var r=n.id,u=n.type,f=function(t,n,r){var u,a=(u={},m(u,ur.CREATE,e),m(u,ur.AUTHORIZE,o),m(u,ur.DISCOVER,i),m(u,ur.SELECT_STREAMS,c),u)[n];return a?a(t,r):t}({version:2,hideNav:!0,preventIntegrationFormClose:!0,additionalState:{default_selections:n.default_streams,ephemeral_token:n.ephemeral_token}},t,n);return new cr(function(t,n){var e=new Vn,o=void 0;e.subscribe(function(i){i.type===a.ERROR_LOADING_CONNECTION&&i.data.id===r?(n(new ar(r)),e.close()):i.type===a.ERROR_LOADING_INTEGRATION_TYPE&&u&&i.data.type===u?(n(new fr(u)),e.close()):i.type===a.ERROR_UPGRADING_EPHEMERAL_TOKEN?(n(new lr),e.close()):i.type===a.CLOSED||i.type===a.INTEGRATION_FORM_CLOSE?(o?t(o):n(new sr),e.close()):i.type===a.INTEGRATION_FLOW_COMPLETED&&(u&&i.data.type===u||r&&i.data.id===r)&&(o=i.data)}),e.initialize(f)})}var a=Object.freeze({BOOTSTRAP:"bootstrap",CLOSED:"closed",CONNECTION_CREATED:"connectionCreated",CONNECTION_UPDATED:"connectionUpdated",ERROR_AUTHORIZING_CONNCTION:"errorAuthorizingConnection",ERROR_LOADING_CONNECTION:"errorLoadingConnection",ERROR_LOADING_INTEGRATION_TYPE:"errorLoadingIntegrationType",ERROR_UPGRADING_EPHEMERAL_TOKEN:"errorUpgradingEphemeralToken",INTEGRATION_FLOW_COMPLETED:"integrationFlowCompleted",INTEGRATION_FORM_CLOSE:"integrationFormClose"}),f=n(function(t){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)}),s={}.hasOwnProperty,l=function(t,n){return s.call(t,n)},p=function(t){try{return!!t()}catch(t){return!0}},h=!p(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),d=n(function(t){var n=t.exports={version:"2.5.3"};"number"==typeof __e&&(__e=n)}),v=(d.version,function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}),y=function(t,n,e){if(v(t),void 0===n)return t;switch(e){case 1:return function(e){return t.call(n,e)};case 2:return function(e,r){return t.call(n,e,r)};case 3:return function(e,r,o){return t.call(n,e,r,o)}}return function(){return t.apply(n,arguments)}},_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b=function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")},O=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),m=function(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t},g=function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)},w=function(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?t:n},E=function(t){return"object"===(void 0===t?"undefined":_(t))?null!==t:"function"==typeof t},S=function(t){if(!E(t))throw TypeError(t+" is not an object!");return t},j=f.document,T=E(j)&&E(j.createElement),P=function(t){return T?j.createElement(t):{}},R=!h&&!p(function(){return 7!=Object.defineProperty(P("div"),"a",{get:function(){return 7}}).a}),C=function(t,n){if(!E(t))return t;var e,r;if(n&&"function"==typeof(e=t.toString)&&!E(r=e.call(t)))return r;if("function"==typeof(e=t.valueOf)&&!E(r=e.call(t)))return r;if(!n&&"function"==typeof(e=t.toString)&&!E(r=e.call(t)))return r;throw TypeError("Can't convert object to primitive value")},N=Object.defineProperty,A={f:h?Object.defineProperty:function(t,n,e){if(S(t),n=C(n,!0),S(e),R)try{return N(t,n,e)}catch(t){}if("get"in e||"set"in e)throw TypeError("Accessors not supported!");return"value"in e&&(t[n]=e.value),t}},L=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}},I=h?function(t,n,e){return A.f(t,n,L(1,e))}:function(t,n,e){return t[n]=e,t},k="prototype",F=function t(n,e,r){var o,i,c,u=n&t.F,a=n&t.G,s=n&t.S,l=n&t.P,p=n&t.B,h=n&t.W,v=a?d:d[e]||(d[e]={}),_=v[k],b=a?f:s?f[e]:(f[e]||{})[k];a&&(r=e);for(o in r)(i=!u&&b&&void 0!==b[o])&&o in v||(c=i?b[o]:r[o],v[o]=a&&"function"!=typeof b[o]?r[o]:p&&i?y(c,f):h&&b[o]==c?function(t){var n=function(n,e,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(n);case 2:return new t(n,e)}return new t(n,e,r)}return t.apply(this,arguments)};return n[k]=t[k],n}(c):l&&"function"==typeof c?y(Function.call,c):c,l&&((v.virtual||(v.virtual={}))[o]=c,n&t.R&&_&&!_[o]&&I(_,o,c)))};F.F=1,F.G=2,F.S=4,F.P=8,F.B=16,F.W=32,F.U=64,F.R=128;var x=F,M=I,D=0,G=Math.random(),W=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++D+G).toString(36))},z=n(function(t){var n=W("meta"),e=A.f,r=0,o=Object.isExtensible||function(){return!0},i=!p(function(){return o(Object.preventExtensions({}))}),c=function(t){e(t,n,{value:{i:"O"+ ++r,w:{}}})},u=t.exports={KEY:n,NEED:!1,fastKey:function(t,e){if(!E(t))return"symbol"==(void 0===t?"undefined":_(t))?t:("string"==typeof t?"S":"P")+t;if(!l(t,n)){if(!o(t))return"F";if(!e)return"E";c(t)}return t[n].i},getWeak:function(t,e){if(!l(t,n)){if(!o(t))return!0;if(!e)return!1;c(t)}return t[n].w},onFreeze:function(t){return i&&u.NEED&&o(t)&&!l(t,n)&&c(t),t}}}),U=(z.KEY,z.NEED,z.fastKey,z.getWeak,z.onFreeze,"__core-js_shared__"),H=f[U]||(f[U]={}),V=function(t){return H[t]||(H[t]={})},K=n(function(t){var n=V("wks"),e=f.Symbol,r="function"==typeof e;(t.exports=function(t){return n[t]||(n[t]=r&&e[t]||(r?e:W)("Symbol."+t))}).store=n}),Y=A.f,B=K("toStringTag"),Z=function(t,n,e){t&&!l(t=e?t:t.prototype,B)&&Y(t,B,{configurable:!0,value:n})},J={f:K},q=A.f,Q=function(t){var n=d.Symbol||(d.Symbol={});"_"==t.charAt(0)||t in n||q(n,t,{value:J.f(t)})},X={}.toString,$=function(t){return X.call(t).slice(8,-1)},tt=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==$(t)?t.split(""):Object(t)},nt=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t},et=function(t){return tt(nt(t))},rt=Math.ceil,ot=Math.floor,it=function(t){return isNaN(t=+t)?0:(t>0?ot:rt)(t)},ct=Math.min,ut=function(t){return t>0?ct(it(t),9007199254740991):0},at=Math.max,ft=Math.min,st=V("keys"),lt=function(t){return st[t]||(st[t]=W(t))},pt=function(t){return function(n,e,r){var o,i=et(n),c=ut(i.length),u=function(t,n){return(t=it(t))<0?at(t+n,0):ft(t,n)}(r,c);if(t&&e!=e){for(;c>u;)if((o=i[u++])!=o)return!0}else for(;c>u;u++)if((t||u in i)&&i[u]===e)return t||u||0;return!t&&-1}}(!1),ht=lt("IE_PROTO"),dt=function(t,n){var e,r=et(t),o=0,i=[];for(e in r)e!=ht&&l(r,e)&&i.push(e);for(;n.length>o;)l(r,e=n[o++])&&(~pt(i,e)||i.push(e));return i},vt="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),yt=Object.keys||function(t){return dt(t,vt)},_t={f:Object.getOwnPropertySymbols},bt={f:{}.propertyIsEnumerable},Ot=Array.isArray||function(t){return"Array"==$(t)},mt=h?Object.defineProperties:function(t,n){S(t);for(var e,r=yt(n),o=r.length,i=0;o>i;)A.f(t,e=r[i++],n[e]);return t},gt=f.document,wt=gt&&gt.documentElement,Et=lt("IE_PROTO"),St=function(){},jt="prototype",Tt=function(){var t,n=P("iframe"),e=vt.length;for(n.style.display="none",wt.appendChild(n),n.src="javascript:",(t=n.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),Tt=t.F;e--;)delete Tt[jt][vt[e]];return Tt()},Pt=Object.create||function(t,n){var e;return null!==t?(St[jt]=S(t),e=new St,St[jt]=null,e[Et]=t):e=Tt(),void 0===n?e:mt(e,n)},Rt=vt.concat("length","prototype"),Ct={f:Object.getOwnPropertyNames||function(t){return dt(t,Rt)}},Nt=Ct.f,At={}.toString,Lt="object"==("undefined"==typeof window?"undefined":_(window))&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],It={f:function(t){return Lt&&"[object Window]"==At.call(t)?function(t){try{return Nt(t)}catch(t){return Lt.slice()}}(t):Nt(et(t))}},kt=Object.getOwnPropertyDescriptor,Ft={f:h?kt:function(t,n){if(t=et(t),n=C(n,!0),R)try{return kt(t,n)}catch(t){}if(l(t,n))return L(!bt.f.call(t,n),t[n])}},xt=z.KEY,Mt=Ft.f,Dt=A.f,Gt=It.f,Wt=f.Symbol,zt=f.JSON,Ut=zt&&zt.stringify,Ht="prototype",Vt=K("_hidden"),Kt=K("toPrimitive"),Yt={}.propertyIsEnumerable,Bt=V("symbol-registry"),Zt=V("symbols"),Jt=V("op-symbols"),qt=Object[Ht],Qt="function"==typeof Wt,Xt=f.QObject,$t=!Xt||!Xt[Ht]||!Xt[Ht].findChild,tn=h&&p(function(){return 7!=Pt(Dt({},"a",{get:function(){return Dt(this,"a",{value:7}).a}})).a})?function(t,n,e){var r=Mt(qt,n);r&&delete qt[n],Dt(t,n,e),r&&t!==qt&&Dt(qt,n,r)}:Dt,nn=function(t){var n=Zt[t]=Pt(Wt[Ht]);return n._k=t,n},en=Qt&&"symbol"==_(Wt.iterator)?function(t){return"symbol"==(void 0===t?"undefined":_(t))}:function(t){return t instanceof Wt},rn=function(t,n,e){return t===qt&&rn(Jt,n,e),S(t),n=C(n,!0),S(e),l(Zt,n)?(e.enumerable?(l(t,Vt)&&t[Vt][n]&&(t[Vt][n]=!1),e=Pt(e,{enumerable:L(0,!1)})):(l(t,Vt)||Dt(t,Vt,L(1,{})),t[Vt][n]=!0),tn(t,n,e)):Dt(t,n,e)},on=function(t,n){S(t);for(var e,r=function(t){var n=yt(t),e=_t.f;if(e)for(var r,o=e(t),i=bt.f,c=0;o.length>c;)i.call(t,r=o[c++])&&n.push(r);return n}(n=et(n)),o=0,i=r.length;i>o;)rn(t,e=r[o++],n[e]);return t},cn=function(t){var n=Yt.call(this,t=C(t,!0));return!(this===qt&&l(Zt,t)&&!l(Jt,t))&&(!(n||!l(this,t)||!l(Zt,t)||l(this,Vt)&&this[Vt][t])||n)},un=function(t,n){if(t=et(t),n=C(n,!0),t!==qt||!l(Zt,n)||l(Jt,n)){var e=Mt(t,n);return!e||!l(Zt,n)||l(t,Vt)&&t[Vt][n]||(e.enumerable=!0),e}},an=function(t){for(var n,e=Gt(et(t)),r=[],o=0;e.length>o;)l(Zt,n=e[o++])||n==Vt||n==xt||r.push(n);return r},fn=function(t){for(var n,e=t===qt,r=Gt(e?Jt:et(t)),o=[],i=0;r.length>i;)!l(Zt,n=r[i++])||e&&!l(qt,n)||o.push(Zt[n]);return o};Qt||(M((Wt=function(){if(this instanceof Wt)throw TypeError("Symbol is not a constructor!");var t=W(arguments.length>0?arguments[0]:void 0);return h&&$t&&tn(qt,t,{configurable:!0,set:function n(e){this===qt&&n.call(Jt,e),l(this,Vt)&&l(this[Vt],t)&&(this[Vt][t]=!1),tn(this,t,L(1,e))}}),nn(t)})[Ht],"toString",function(){return this._k}),Ft.f=un,A.f=rn,Ct.f=It.f=an,bt.f=cn,_t.f=fn,J.f=function(t){return nn(K(t))}),x(x.G+x.W+x.F*!Qt,{Symbol:Wt});for(var sn="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ln=0;sn.length>ln;)K(sn[ln++]);for(var pn=yt(K.store),hn=0;pn.length>hn;)Q(pn[hn++]);x(x.S+x.F*!Qt,"Symbol",{for:function(t){return l(Bt,t+="")?Bt[t]:Bt[t]=Wt(t)},keyFor:function(t){if(!en(t))throw TypeError(t+" is not a symbol!");for(var n in Bt)if(Bt[n]===t)return n},useSetter:function(){$t=!0},useSimple:function(){$t=!1}}),x(x.S+x.F*!Qt,"Object",{create:function(t,n){return void 0===n?Pt(t):on(Pt(t),n)},defineProperty:rn,defineProperties:on,getOwnPropertyDescriptor:un,getOwnPropertyNames:an,getOwnPropertySymbols:fn}),zt&&x(x.S+x.F*(!Qt||p(function(){var t=Wt();return"[null]"!=Ut([t])||"{}"!=Ut({a:t})||"{}"!=Ut(Object(t))})),"JSON",{stringify:function(t){for(var n,e,r=[t],o=1;arguments.length>o;)r.push(arguments[o++]);if(e=n=r[1],(E(n)||void 0!==t)&&!en(t))return Ot(n)||(n=function(t,n){if("function"==typeof e&&(n=e.call(this,t,n)),!en(n))return n}),r[1]=n,Ut.apply(zt,r)}}),Wt[Ht][Kt]||I(Wt[Ht],Kt,Wt[Ht].valueOf),Z(Wt,"Symbol"),Z(Math,"Math",!0),Z(f.JSON,"JSON",!0),x(x.S,"Object",{create:Pt}),x(x.S+x.F*!h,"Object",{defineProperty:A.f}),x(x.S+x.F*!h,"Object",{defineProperties:mt});var dn=function(t,n){var e=(d.Object||{})[t]||Object[t],r={};r[t]=n(e),x(x.S+x.F*p(function(){e(1)}),"Object",r)},vn=Ft.f;dn("getOwnPropertyDescriptor",function(){return function(t,n){return vn(et(t),n)}});var yn=function(t){return Object(nt(t))},_n=lt("IE_PROTO"),bn=Object.prototype,On=Object.getPrototypeOf||function(t){return t=yn(t),l(t,_n)?t[_n]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?bn:null};dn("getPrototypeOf",function(){return function(t){return On(yn(t))}}),dn("keys",function(){return function(t){return yt(yn(t))}}),dn("getOwnPropertyNames",function(){return It.f});var mn=z.onFreeze;dn("freeze",function(t){return function(n){return t&&E(n)?t(mn(n)):n}});var gn=z.onFreeze;dn("seal",function(t){return function(n){return t&&E(n)?t(gn(n)):n}});var wn=z.onFreeze;dn("preventExtensions",function(t){return function(n){return t&&E(n)?t(wn(n)):n}}),dn("isFrozen",function(t){return function(n){return!E(n)||!!t&&t(n)}}),dn("isSealed",function(t){return function(n){return!E(n)||!!t&&t(n)}}),dn("isExtensible",function(t){return function(n){return!!E(n)&&(!t||t(n))}});var En=Object.assign,Sn=!En||p(function(){var t={},n={},e=Symbol(),r="abcdefghijklmnopqrst";return t[e]=7,r.split("").forEach(function(t){n[t]=t}),7!=En({},t)[e]||Object.keys(En({},n)).join("")!=r})?function(t,n){for(var e=yn(t),r=arguments.length,o=1,i=_t.f,c=bt.f;r>o;)for(var u,a=tt(arguments[o++]),f=i?yt(a).concat(i(a)):yt(a),s=f.length,l=0;s>l;)c.call(a,u=f[l++])&&(e[u]=a[u]);return e}:En;x(x.S+x.F,"Object",{assign:Sn});var jn=Object.is||function(t,n){return t===n?0!==t||1/t==1/n:t!=t&&n!=n};x(x.S,"Object",{is:jn});var Tn=function(t,n){if(S(t),!E(n)&&null!==n)throw TypeError(n+": can't set as prototype!")},Pn={set:Object.setPrototypeOf||("__proto__"in{}?function(t,n,e){try{(e=y(Function.call,Ft.f(Object.prototype,"__proto__").set,2))(t,[]),n=!(t instanceof Array)}catch(t){n=!0}return function(t,r){return Tn(t,r),n?t.__proto__=r:e(t,r),t}}({},!1):void 0),check:Tn};x(x.S,"Object",{setPrototypeOf:Pn.set});var Rn=f.Reflect,Cn=Rn&&Rn.ownKeys||function(t){var n=Ct.f(S(t)),e=_t.f;return e?n.concat(e(t)):n},Nn=function(t,n,e){n in t?A.f(t,n,L(0,e)):t[n]=e};x(x.S,"Object",{getOwnPropertyDescriptors:function(t){for(var n,e,r=et(t),o=Ft.f,i=Cn(r),c={},u=0;i.length>u;)void 0!==(e=o(r,n=i[u++]))&&Nn(c,n,e);return c}});var An=bt.f,Ln=function(t){return function(n){for(var e,r=et(n),o=yt(r),i=o.length,c=0,u=[];i>c;)An.call(r,e=o[c++])&&u.push(t?[e,r[e]]:r[e]);return u}},In=Ln(!1);x(x.S,"Object",{values:function(t){return In(t)}});var kn=Ln(!0);x(x.S,"Object",{entries:function(t){return kn(t)}});h&&x(x.P+!0,"Object",{__defineGetter__:function(t,n){A.f(yn(this),t,{get:v(n),enumerable:!0,configurable:!0})}}),h&&x(x.P+!0,"Object",{__defineSetter__:function(t,n){A.f(yn(this),t,{set:v(n),enumerable:!0,configurable:!0})}});var Fn=Ft.f;h&&x(x.P+!0,"Object",{__lookupGetter__:function(t){var n,e=yn(this),r=C(t,!0);do{if(n=Fn(e,r))return n.get}while(e=On(e))}});var xn=Ft.f;h&&x(x.P+!0,"Object",{__lookupSetter__:function(t){var n,e=yn(this),r=C(t,!0);do{if(n=xn(e,r))return n.set}while(e=On(e))}}),x(x.S+x.F,"Object",{isObject:E});var Mn=K("toStringTag"),Dn="Arguments"==$(function(){return arguments}()),Gn=function(t){var n,e,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(e=function(t,n){try{return t[n]}catch(t){}}(n=Object(t),Mn))?e:Dn?$(n):"Object"==(r=$(n))&&"function"==typeof n.callee?"Arguments":r};x(x.S+x.F,"Object",{classof:Gn});var Wn=function(t,n){for(var e,r=Cn(et(n)),o=r.length,i=0;o>i;)A.f(t,e=r[i++],Ft.f(n,e));return t};x(x.S+x.F,"Object",{define:Wn}),x(x.S+x.F,"Object",{make:function(t,n){return Wn(Pt(t),n)}});var zn=d.Object,Un=function(){},Hn=zn.values(a),Vn=function(){function t(){var n=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};b(this,t),this._childWindow=null,this._initialized=!1,this._context=e,this._subscribers=[],window.addEventListener("message",function(t){t.source===n._childWindow&&n._onMessage(t.data)})}return O(t,[{key:"subscribe",value:function(t){var n=this;return this._subscribers.push(t),function(){n._subscribers=n._subscribers.filter(function(n){return t!=t})}}},{key:"_emit",value:function(t){var n=!0,e=!1,r=void 0;try{for(var o,i=this._subscribers[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){(0,o.value)(t)}}catch(t){e=!0,r=t}finally{try{!n&&i.return&&i.return()}finally{if(e)throw r}}}},{key:"_pollForChildWindowClosed",value:function(){var t=this;window.setTimeout(function(){t._childWindow&&(t._childWindow.closed?t._windowClosed():t._pollForChildWindowClosed())},1e3)}},{key:"_windowClosed",value:function(){Un("event: closed"),this._childWindow=null,this._initialized=!1,this._emit({type:"closed"})}},{key:"_onMessage",value:function(t){t.type===a.BOOTSTRAP?(Un("event: initialized"),this._initialized=!0,this._sendContext()):t.type===a.CLOSED?this._windowClosed():Hn.indexOf(t.type)>=0?(Un("event",t),this._emit(t)):Un("event: [WARNING] unknown message type",t)}},{key:"_sendContext",value:function(){if(!this._initialized||this._childWindow.closed)return this.initialize();Un("send context",this._context),this._childWindow.postMessage({type:"update",data:this._context},"*")}},{key:"setContext",value:function(t){this._content=t,this._sendContext()}},{key:"initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Un("initialize"),this._context=t,this._childWindow&&this._childWindow.close(),this._initialized=!1,this._childWindow=window.open("https://app.stitchdata.com/v2/js-client"),this._pollForChildWindowClosed()}},{key:"close",value:function(){Un("close"),this._childWindow&&this._childWindow.close()}}]),t}(),Kn={},Yn={};I(Yn,K("iterator"),function(){return this});var Bn=K("iterator"),Zn=!([].keys&&"next"in[].keys()),Jn="values",qn=function(){return this},Qn=function(t,n,e,r,o,i,c){!function(t,n,e){t.prototype=Pt(Yn,{next:L(1,e)}),Z(t,n+" Iterator")}(e,n,r);var u,a,f,s=function(t){if(!Zn&&t in d)return d[t];switch(t){case"keys":case Jn:return function(){return new e(this,t)}}return function(){return new e(this,t)}},l=n+" Iterator",p=o==Jn,h=!1,d=t.prototype,v=d[Bn]||d["@@iterator"]||o&&d[o],y=!Zn&&v||s(o),_=o?p?s("entries"):y:void 0,b="Array"==n?d.entries||v:v;if(b&&(f=On(b.call(new t)))!==Object.prototype&&f.next&&Z(f,l,!0),p&&v&&v.name!==Jn&&(h=!0,y=function(){return v.call(this)}),c&&(Zn||h||!d[Bn])&&I(d,Bn,y),Kn[n]=y,Kn[l]=qn,o)if(u={values:p?y:s(Jn),keys:i?y:s("keys"),entries:_},c)for(a in u)a in d||M(d,a,u[a]);else x(x.P+x.F*(Zn||h),n,u);return u},Xn=function(t){return function(n,e){var r,o,i=String(nt(n)),c=it(e),u=i.length;return c<0||c>=u?t?"":void 0:(r=i.charCodeAt(c))<55296||r>56319||c+1===u||(o=i.charCodeAt(c+1))<56320||o>57343?t?i.charAt(c):r:t?i.slice(c,c+2):o-56320+(r-55296<<10)+65536}}(!0);Qn(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,n=this._t,e=this._i;return e>=n.length?{value:void 0,done:!0}:(t=Xn(n,e),this._i+=t.length,{value:t,done:!1})});var $n=function(t,n){return{value:n,done:!!t}};Qn(Array,"Array",function(t,n){this._t=et(t),this._i=0,this._k=n},function(){var t=this._t,n=this._k,e=this._i++;return!t||e>=t.length?(this._t=void 0,$n(1)):$n(0,"keys"==n?e:"values"==n?t[e]:[e,t[e]])},"values");Kn.Arguments=Kn.Array;for(var te=K("toStringTag"),ne="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),ee=0;ee<ne.length;ee++){var re=ne[ee],oe=f[re],ie=oe&&oe.prototype;ie&&!ie[te]&&I(ie,te,re),Kn[re]=Kn.Array}var ce,ue,ae,fe=function(t,n,e,r){try{return r?n(S(e)[0],e[1]):n(e)}catch(n){var o=t.return;throw void 0!==o&&S(o.call(t)),n}},se=K("iterator"),le=Array.prototype,pe=K("iterator"),he=d.getIteratorMethod=function(t){if(void 0!=t)return t[pe]||t["@@iterator"]||Kn[Gn(t)]},de=n(function(t){var n={},e={},r=t.exports=function(t,r,o,i,c){var u,a,f,s,l=c?function(){return t}:he(t),p=y(o,i,r?2:1),h=0;if("function"!=typeof l)throw TypeError(t+" is not iterable!");if(function(t){return void 0!==t&&(Kn.Array===t||le[se]===t)}(l)){for(u=ut(t.length);u>h;h++)if((s=r?p(S(a=t[h])[0],a[1]):p(t[h]))===n||s===e)return s}else for(f=l.call(t);!(a=f.next()).done;)if((s=fe(f,p,a.value,r))===n||s===e)return s};r.BREAK=n,r.RETURN=e}),ve=K("species"),ye=function(t,n){var e,r=S(t).constructor;return void 0===r||void 0==(e=S(r)[ve])?n:v(e)},_e=f.process,be=f.setImmediate,Oe=f.clearImmediate,me=f.MessageChannel,ge=f.Dispatch,we=0,Ee={},Se="onreadystatechange",je=function(){var t=+this;if(Ee.hasOwnProperty(t)){var n=Ee[t];delete Ee[t],n()}},Te=function(t){je.call(t.data)};be&&Oe||(be=function(t){for(var n=[],e=1;arguments.length>e;)n.push(arguments[e++]);return Ee[++we]=function(){!function(t,n,e){var r=void 0===e;switch(n.length){case 0:return r?t():t.call(e);case 1:return r?t(n[0]):t.call(e,n[0]);case 2:return r?t(n[0],n[1]):t.call(e,n[0],n[1]);case 3:return r?t(n[0],n[1],n[2]):t.call(e,n[0],n[1],n[2]);case 4:return r?t(n[0],n[1],n[2],n[3]):t.call(e,n[0],n[1],n[2],n[3])}t.apply(e,n)}("function"==typeof t?t:Function(t),n)},ce(we),we},Oe=function(t){delete Ee[t]},"process"==$(_e)?ce=function(t){_e.nextTick(y(je,t,1))}:ge&&ge.now?ce=function(t){ge.now(y(je,t,1))}:me?(ae=(ue=new me).port2,ue.port1.onmessage=Te,ce=y(ae.postMessage,ae,1)):f.addEventListener&&"function"==typeof postMessage&&!f.importScripts?(ce=function(t){f.postMessage(t+"","*")},f.addEventListener("message",Te,!1)):ce=Se in P("script")?function(t){wt.appendChild(P("script"))[Se]=function(){wt.removeChild(this),je.call(t)}}:function(t){setTimeout(y(je,t,1),0)});var Pe={set:be,clear:Oe},Re=Pe.set,Ce=f.MutationObserver||f.WebKitMutationObserver,Ne=f.process,Ae=f.Promise,Le="process"==$(Ne),Ie={f:function(t){return new function(t){var n,e;this.promise=new t(function(t,r){if(void 0!==n||void 0!==e)throw TypeError("Bad Promise constructor");n=t,e=r}),this.resolve=v(n),this.reject=v(e)}(t)}},ke=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}},Fe=function(t,n){if(S(t),E(n)&&n.constructor===t)return n;var e=Ie.f(t);return(0,e.resolve)(n),e.promise},xe=K("species"),Me=K("iterator"),De=!1;try{[7][Me]().return=function(){De=!0}}catch(t){}var Ge,We,ze,Ue,He=Pe.set,Ve=function(){var t,n,e,r=function(){var r,o;for(Le&&(r=Ne.domain)&&r.exit();t;){o=t.fn,t=t.next;try{o()}catch(r){throw t?e():n=void 0,r}}n=void 0,r&&r.enter()};if(Le)e=function(){Ne.nextTick(r)};else if(!Ce||f.navigator&&f.navigator.standalone)if(Ae&&Ae.resolve){var o=Ae.resolve();e=function(){o.then(r)}}else e=function(){Re.call(f,r)};else{var i=!0,c=document.createTextNode("");new Ce(r).observe(c,{characterData:!0}),e=function(){c.data=i=!i}}return function(r){var o={fn:r,next:void 0};n&&(n.next=o),t||(t=o,e()),n=o}}(),Ke="Promise",Ye=f.TypeError,Be=f.process,Ze=f[Ke],Je="process"==Gn(Be),qe=function(){},Qe=We=Ie.f,Xe=!!function(){try{var t=Ze.resolve(1),n=(t.constructor={})[K("species")]=function(t){t(qe,qe)};return(Je||"function"==typeof PromiseRejectionEvent)&&t.then(qe)instanceof n}catch(t){}}(),$e=function(t){var n;return!(!E(t)||"function"!=typeof(n=t.then))&&n},tr=function(t,n){if(!t._n){t._n=!0;var e=t._c;Ve(function(){for(var r=t._v,o=1==t._s,i=0,c=function(n){var e,i,c=o?n.ok:n.fail,u=n.resolve,a=n.reject,f=n.domain;try{c?(o||(2==t._h&&rr(t),t._h=1),!0===c?e=r:(f&&f.enter(),e=c(r),f&&f.exit()),e===n.promise?a(Ye("Promise-chain cycle")):(i=$e(e))?i.call(e,u,a):u(e)):a(r)}catch(t){a(t)}};e.length>i;)c(e[i++]);t._c=[],t._n=!1,n&&!t._h&&nr(t)})}},nr=function(t){He.call(f,function(){var n,e,r,o=t._v,i=er(t);if(i&&(n=ke(function(){Je?Be.emit("unhandledRejection",o,t):(e=f.onunhandledrejection)?e({promise:t,reason:o}):(r=f.console)&&r.error&&r.error("Unhandled promise rejection",o)}),t._h=Je||er(t)?2:1),t._a=void 0,i&&n.e)throw n.v})},er=function(t){return 1!==t._h&&0===(t._a||t._c).length},rr=function(t){He.call(f,function(){var n;Je?Be.emit("rejectionHandled",t):(n=f.onrejectionhandled)&&n({promise:t,reason:t._v})})},or=function(t){var n=this;n._d||(n._d=!0,(n=n._w||n)._v=t,n._s=2,n._a||(n._a=n._c.slice()),tr(n,!0))},ir=function t(n){var e,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===n)throw Ye("Promise can't be resolved itself");(e=$e(n))?Ve(function(){var o={_w:r,_d:!1};try{e.call(n,y(t,o,1),y(or,o,1))}catch(t){or.call(o,t)}}):(r._v=n,r._s=1,tr(r,!1))}catch(t){or.call({_w:r,_d:!1},t)}}};Xe||(Ze=function(t){!function(t,n,e,r){if(!(t instanceof n)||void 0!==r&&r in t)throw TypeError(e+": incorrect invocation!")}(this,Ze,Ke,"_h"),v(t),Ge.call(this);try{t(y(ir,this,1),y(or,this,1))}catch(t){or.call(this,t)}},(Ge=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=function(t,n,e){for(var r in n)e&&t[r]?t[r]=n[r]:I(t,r,n[r]);return t}(Ze.prototype,{then:function(t,n){var e=Qe(ye(this,Ze));return e.ok="function"!=typeof t||t,e.fail="function"==typeof n&&n,e.domain=Je?Be.domain:void 0,this._c.push(e),this._a&&this._a.push(e),this._s&&tr(this,!1),e.promise},catch:function(t){return this.then(void 0,t)}}),ze=function(){var t=new Ge;this.promise=t,this.resolve=y(ir,t,1),this.reject=y(or,t,1)},Ie.f=Qe=function(t){return t===Ze||t===Ue?new ze(t):We(t)}),x(x.G+x.W+x.F*!Xe,{Promise:Ze}),Z(Ze,Ke),function(t){var n="function"==typeof d[t]?d[t]:f[t];h&&n&&!n[xe]&&A.f(n,xe,{configurable:!0,get:function(){return this}})}(Ke),Ue=d[Ke],x(x.S+x.F*!Xe,Ke,{reject:function(t){var n=Qe(this);return(0,n.reject)(t),n.promise}}),x(x.S+!0*x.F,Ke,{resolve:function(t){return Fe(this===Ue?Ze:this,t)}}),x(x.S+x.F*!(Xe&&function(t,n){if(!n&&!De)return!1;var e=!1;try{var r=[7],o=r[Me]();o.next=function(){return{done:e=!0}},r[Me]=function(){return o},t(r)}catch(t){}return e}(function(t){Ze.all(t).catch(qe)})),Ke,{all:function(t){var n=this,e=Qe(n),r=e.resolve,o=e.reject,i=ke(function(){var e=[],i=0,c=1;de(t,!1,function(t){var u=i++,a=!1;e.push(void 0),c++,n.resolve(t).then(function(t){a||(a=!0,e[u]=t,--c||r(e))},o)}),--c||r(e)});return i.e&&o(i.v),e.promise},race:function(t){var n=this,e=Qe(n),r=e.reject,o=ke(function(){de(t,!1,function(t){n.resolve(t).then(e.resolve,r)})});return o.e&&r(o.v),e.promise}}),x(x.P+x.R,"Promise",{finally:function(t){var n=ye(this,d.Promise||f.Promise),e="function"==typeof t;return this.then(e?function(e){return Fe(n,t()).then(function(){return e})}:t,e?function(e){return Fe(n,t()).then(function(){throw e})}:t)}}),x(x.S,"Promise",{try:function(t){var n=Ie.f(this),e=ke(t);return(e.e?n.reject:n.resolve)(e.v),n.promise}});var cr=d.Promise,ur={CREATE:"CREATE",AUTHORIZE:"AUTHORIZE",DISCOVER:"DISCOVER",SELECT_STREAMS:"SELECT_STREAMS"},ar=function(t){function n(t){b(this,n);var e=w(this,(n.__proto__||zn.getPrototypeOf(n)).call(this,"Integration with id "+t+" not found."));return e.constructor=n,e}return g(n,t),n}(Error),fr=function(t){function n(t){b(this,n);var e=w(this,(n.__proto__||zn.getPrototypeOf(n)).call(this,'Unknown source type: "'+t+'".'));return e.constructor=n,e}return g(n,t),n}(Error),sr=function(t){function n(){b(this,n);var t=w(this,(n.__proto__||zn.getPrototypeOf(n)).call(this,"App closed before reaching end of flow."));return t.constructor=n,t}return g(n,t),n}(Error),lr=function(t){function n(){b(this,n);var t=w(this,(n.__proto__||zn.getPrototypeOf(n)).call(this,"Error upgrading ephemeral token."));return t.constructor=n,t}return g(n,t),n}(Error);t.STEPS=ur,t.SourceNotFoundError=ar,t.UnknownSourceTypeError=fr,t.AppClosedPrematurelyError=sr,t.UpgradeEphemeralTokenError=lr,t.addSource=function(t){return u(ur.CREATE,t)},t.authorizeSource=function(t){return u(ur.AUTHORIZE,t)},t.displayDiscoveryOutputForSource=function(t){return u(ur.DISCOVER,t)},t.selectStreamsForSource=function(t){return u(ur.SELECT_STREAMS,t)},Object.defineProperty(t,"__esModule",{value:!0})});
