!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Stitch=e()}}(function(){return function e(t,i,n){function o(r,l){if(!i[r]){if(!t[r]){var u="function"==typeof require&&require;if(!l&&u)return u(r,!0);if(s)return s(r,!0);var d=new Error("Cannot find module '"+r+"'");throw d.code="MODULE_NOT_FOUND",d}var a=i[r]={exports:{}};t[r][0].call(a.exports,function(e){var i=t[r][1][e];return o(i||e)},a,a.exports,e,t,i,n)}return i[r].exports}for(var s="function"==typeof require&&require,r=0;r<n.length;r++)o(n[r]);return o}({1:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=function(e){return e&&e.__esModule?e:{default:e}}(e("./EVENT_TYPES.js")),s=function(){},r=Object.keys(o.default).map(function(e){return o.default[e]}),l=function(){function e(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._childWindow=null,this._initialized=!1,this._context=i,this._subscribers=[],window.addEventListener("message",function(e){e.source===t._childWindow&&t._onMessage(e.data)})}return n(e,[{key:"subscribe",value:function(e){var t=this;return this._subscribers.push(e),function(){t._subscribers=t._subscribers.filter(function(t){return e!=e})}}},{key:"_emit",value:function(e){var t=!0,i=!1,n=void 0;try{for(var o,s=this._subscribers[Symbol.iterator]();!(t=(o=s.next()).done);t=!0){(0,o.value)(e)}}catch(e){i=!0,n=e}finally{try{!t&&s.return&&s.return()}finally{if(i)throw n}}}},{key:"_pollForChildWindowClosed",value:function(){var e=this;window.setTimeout(function(){e._childWindow&&(e._childWindow.closed?e._windowClosed():e._pollForChildWindowClosed())},1e3)}},{key:"_windowClosed",value:function(){s("event: closed"),this._childWindow=null,this._initialized=!1,this._emit({type:"closed"})}},{key:"_onMessage",value:function(e){e.type===o.default.BOOTSTRAP?(s("event: initialized"),this._initialized=!0,this._sendContext()):"closed"===e.type||(r.indexOf(e.type)>=0?(s("event",e),this._emit(e)):s("event: [WARNING] unknown message type",e))}},{key:"_sendContext",value:function(){if(!this._initialized||this._childWindow.closed)return this.initialize();s("send context",this._context),this._childWindow.postMessage({type:"update",data:this._context},"*")}},{key:"setContext",value:function(e){this._content=e,this._sendContext()}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s("initialize"),this._context=e,this._childWindow&&this._childWindow.close(),this._initialized=!1,this._childWindow=window.open("https://app.stitchdata.com/v2/js-client"),this._pollForChildWindowClosed()}},{key:"close",value:function(){s("close"),this._childWindow&&this._childWindow.close()}}]),e}();i.default=l},{"./EVENT_TYPES.js":2}],2:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=Object.freeze({BOOTSTRAP:"bootstrap",CLOSED:"closed",CONNECTION_CREATED:"connectionCreated",CONNECTION_UPDATED:"connectionUpdated",INTEGRATION_FORM_CLOSE:"integrationFormClose"})},{}],3:[function(e,t,i){"use strict";var n=e("./Client.js"),o=e("./utils.js");t.exports={Client:n,addSourceIntegration:o.addSourceIntegration}},{"./Client.js":1,"./utils.js":4}],4:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(i,"__esModule",{value:!0}),i.addSourceIntegration=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=new o.default,r=!1,l=void 0;n.subscribe(function(i){i.type===s.default.CONNECTION_CREATED&&i.data.type===e?l=i.data:i.type!==s.default.CLOSED&&i.type!==s.default.INTEGRATION_FORM_CLOSE||(n.close(),r||(t(l),r=!0))}),n.initialize({hideNav:!0,preventIntegrationFormClose:!0,defaultSelections:i,targetState:{name:"app.connections.create",params:{route:e}}})};var o=n(e("./Client.js")),s=n(e("./EVENT_TYPES.js"))},{"./Client.js":1,"./EVENT_TYPES.js":2}]},{},[3])(3)});